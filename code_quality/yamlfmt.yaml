parameters:
  - name: SOURCE_FOLDER
    type: string
    default: '.'

steps:
  - powershell: |
      choco install golang -y
    displayName: 'Install Go (Golang)'

  - powershell: |
      # Ensure Go is available
      go version

      # Install yamlfmt
     # go install github.com/google/yamlfmt/cmd/yamlfmt@latest

      # Add Go bin folder to PATH for this session
      $env:PATH += ";$env:USERPROFILE\go\bin"

      # Check yamlfmt version to verify install
      yamlfmt --version
    displayName: 'Install yamlfmt'

  - powershell: |
      # Run yamlfmt lint on the source folder
      yamlfmt -lint ${{ parameters.SOURCE_FOLDER }}
    displayName: 'Run yamlfmt'
