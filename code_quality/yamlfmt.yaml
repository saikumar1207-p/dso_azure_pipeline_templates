parameters:
  - name: SOURCE_FOLDER
    type: string
    default: '.'

steps:
- powershell: |
    choco install golang -y
  displayName: 'Install Go (Golang)'

- powershell: |
    go version
    go install github.com/google/yamlfmt/cmd/yamlfmt@latest
    $env:PATH += ";$env:USERPROFILE\go\bin"
    yamlfmt --version
  displayName: 'Install yamlfmt'

- powershell: |
    yamlfmt -lint ${{ parameters.SOURCE_FOLDER }}
  displayName: 'Run yamlfmt'

